(this.webpackJsonpsrt2=this.webpackJsonpsrt2||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),l=a(20),r=a.n(l),o=(a(42),a(4)),s=a(8),u=(a(43),a(36)),d=function(e){var t=e.text,a=e.x,c=e.y,i=e.width,l=e.size,r=e.style,s=e.id,u=e.globalStyle;return Object(n.jsx)("p",{id:"".concat(s),style:Object(o.a)(Object(o.a)({position:"absolute",top:"".concat(c,"%"),left:"".concat(a,"%"),width:"".concat(i,"%"),fontSize:"".concat(l,"px")},r),u),children:t})},b=function(e){var t,a=e.imgPath,i=e.subtitle,l=e.page,r=Object(u.a)(e,["imgPath","subtitle","page"]),b=Object(c.useRef)(null),j=Object(c.useState)(0),O=Object(s.a)(j,2),p=O[0],f=O[1],g=Object(c.useState)(0),h=Object(s.a)(g,2),v=h[0],x=h[1],m=Object(c.useState)(0),y=Object(s.a)(m,2),S=y[0],C=y[1],w=Object(c.useState)(0),k=Object(s.a)(w,2),I=k[0],F=k[1],N=function(){var e,t,a,n;f(null===(e=b.current)||void 0===e?void 0:e.offsetTop),x(null===(t=b.current)||void 0===t?void 0:t.offsetLeft),C(null===(a=b.current)||void 0===a?void 0:a.offsetHeight),F(null===(n=b.current)||void 0===n?void 0:n.offsetWidth)};return Object(c.useEffect)((function(){return window.addEventListener("resize",N),function(){window.removeEventListener("resize",N)}}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{style:{position:"absolute",zIndex:11,top:p,left:v,width:I,height:S},children:null===(t=i[l])||void 0===t?void 0:t.sort((function(e,t){return e.index-t.index})).map((function(e){var t=e.text,a=e.x,c=e.y,l=e.width,r=e.size,o=e.style,s=e.index;return Object(n.jsx)(d,{id:s,text:t,globalStyle:i.__global_style__,x:a,y:c,width:l,size:r*I/100,style:o},s)}))}),Object(n.jsx)("img",Object(o.a)({onLoad:N,ref:b,src:a,alt:l},r))]})},j=function(e){var t={},a="",n=0,c=0;return e.split("\n").map((function(e){if(e.includes("$START"))a=e.substring(6).trim().split("/")[0],t[a]=[],e.substring(6).trim().split("/")[1]&&(t.__global_style__=JSON.parse(e.substring(6).trim().split("/")[1]));else if(e.includes("$END"))a="";else if(e.includes(">>")){var i,l,r=e.substring(2),o=r.split("/")[0].split("-"),u=Object(s.a)(o,4),d=u[0],b=u[1],j=u[2],O=u[3];null===(i=t[a])||void 0===i||i.push({index:r.split("/")[2]?parseInt(r.split("/")[2]):c+n,x:parseFloat(d),y:parseFloat(b),size:parseFloat(j),width:parseFloat(O),style:JSON.parse(null===(l=r.split("/"))||void 0===l?void 0:l[1])}),c=r.split("/")[2]?parseInt(r.split("/")[2]):c,n+=1}else if(e.length>1){var p,f;if((null===(p=t[a])||void 0===p?void 0:p.length)>0)t[a][(null===(f=t[a])||void 0===f?void 0:f.length)-1].text=e}})),t},O=a(10),p=a(18),f=a(56),g=a(54),h=a(31),v=a(55),x=a(35),m="#0f04";function y(e,t,a){var n=new Blob([e],{type:a});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var c=document.createElement("a"),i=URL.createObjectURL(n);c.href=i,c.download=t,document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(i)}),0)}}var S=function(e){return function(t){var a=t.target.files;if(FileReader&&a&&a.length){var n=new FileReader;n.onload=function(){return e(n)},n.readAsDataURL(a[0])}}},C=function(e){return function(t){var a=t.target.files;if(FileReader&&a&&a.length){var n=new FileReader;n.onload=function(){return e(n)},n.readAsText(a[0])}}},w=function(e){var t,a,i,l=e.sub,r=e.setSub,u=e.page,d=e.setPage,b=e.setImage,w=(e.setImageStyle,Object(c.useState)(u||"page1")),k=Object(s.a)(w,2),I=k[0],F=k[1],N=Object(c.useState)(!1),L=Object(s.a)(N,2),_=L[0],z=L[1],T=Object(c.useState)(1),R=Object(s.a)(T,2),P=R[0],G=R[1],E=Object(c.useState)(0),A=Object(s.a)(E,2),J=A[0],D=A[1],B=Object(c.useState)(0),U=Object(s.a)(B,2),X=U[0],Y=U[1],$=Object(c.useState)(0),W=Object(s.a)($,2),H=W[0],M=W[1],q=Object(c.useState)(0),K=Object(s.a)(q,2),V=K[0],Q=K[1],Z=Object(c.useState)(""),ee=Object(s.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(c.useState)(!0),ce=Object(s.a)(ne,2),ie=ce[0],le=ce[1],re=Object(c.useState)({}),oe=Object(s.a)(re,2),se=oe[0],ue=oe[1],de=Object(c.useState)(""),be=Object(s.a)(de,2),je=be[0],Oe=be[1],pe=Object(c.useState)(""),fe=Object(s.a)(pe,2),ge=fe[0],he=fe[1],ve=Object(c.useState)(l||{}),xe=Object(s.a)(ve,2),me=xe[0],ye=xe[1],Se=Object(c.useState)((null===(t=l["".concat(I)])||void 0===t?void 0:t.reduce((function(e,t){return t.index>e?t.index:e}),0))+1),Ce=Object(s.a)(Se,2),we=Ce[0],ke=Ce[1];Object(c.useEffect)((function(){!function(){if(Object.keys(me).includes(I))try{r((function(e){var t;return Object(o.a)(Object(o.a)({},e),{},Object(O.a)({},I,Object(p.a)(null===(t=e[I])||void 0===t?void 0:t.map((function(e){return e.index===parseInt(String(P))?Object(o.a)(Object(o.a)({},e),{},{x:parseFloat(J),y:parseFloat(X),width:parseFloat(H),size:parseFloat(V),text:te,style:Object(o.a)(Object(o.a)({},se),{},{backgroundColor:m})}):(e.style.backgroundColor===m&&delete e.style.backgroundColor,Object(o.a)(Object(o.a)({},e),{},{style:Object(o.a)(Object(o.a)({},e.style),{},{backgroundColor:null===(t=me[I])||void 0===t||null===(a=t.style)||void 0===a?void 0:a.backgroundColor})}));var t,a})))))})),ye((function(e){var t;return Object(o.a)(Object(o.a)({},e),{},Object(O.a)({},I,Object(p.a)(null===me||void 0===me||null===(t=me[I])||void 0===t?void 0:t.map((function(e){return e.index===parseInt(String(P))?Object(o.a)(Object(o.a)({},e),{},{x:parseFloat(J),y:parseFloat(X),width:parseFloat(H),size:parseFloat(V),text:te,style:Object(o.a)({},se)}):Object(o.a)({},e)})))))}))}catch(e){console.log(e)}}()}),[J,X,H,V,te,se,u]);var Ie=function(e){if(I){var t,a=null===(t=(e||l)[I])||void 0===t?void 0:t.find((function(e){return e.index===parseInt(String(P))}));D((function(e){return(null===a||void 0===a?void 0:a.x)||e})),Y((function(e){return(null===a||void 0===a?void 0:a.y)||e})),M((function(e){return(null===a||void 0===a?void 0:a.width)||e})),Q((function(e){return(null===a||void 0===a?void 0:a.size)||e})),ae((null===a||void 0===a?void 0:a.text)||""),ue((function(e){return(null===a||void 0===a?void 0:a.style)?Object(o.a)({},null===a||void 0===a?void 0:a.style):Object(o.a)({},e)}))}};return Object(c.useEffect)((function(){Ie()}),[P,I]),Object(c.useEffect)((function(){var e;z(!Object.keys(l).includes(I)),Object.keys(l).includes(I)&&d(I),ke((null===(e=me[I])||void 0===e?void 0:e.reduce((function(e,t){var a=t.index;return a>e?a:e}),0))+1)}),[I]),Object(n.jsxs)(f.a,{style:{position:"fixed",width:"500px",left:0,overflowY:"auto",overflowX:"hidden",zIndex:50},children:[Object(n.jsxs)("div",{className:"form-check form-switch mr-0",children:[Object(n.jsx)("input",{className:"form-check-input",type:"checkbox",onClick:function(){return le((function(e){return!e}))},id:"flexSwitchCheckChecked",checked:ie}),Object(n.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckChecked",children:"Settings"})]}),ie&&Object(n.jsxs)("div",{children:[Object(n.jsxs)(g.a,{className:"mb-2",children:[Object(n.jsxs)(f.a.Group,{className:" col-4 mb-0",controlId:"subtitle-file",children:[Object(n.jsx)(f.a.Label,{className:"btn btn-primary",children:"Load Image"}),Object(n.jsx)(f.a.Control,{onChange:S((function(e){localStorage.setItem("lastImage",String(e.result)),b(String(e.result))})),type:"file",style:{visibility:"hidden",height:"0px"},placeholder:"Image"})]}),Object(n.jsxs)(f.a.Group,{className:" col-4 mb-0",controlId:"image-file",children:[Object(n.jsx)(f.a.Label,{className:"btn btn-primary",children:"Load SubTitle"}),Object(n.jsx)(f.a.Control,{onChange:C((function(e){localStorage.setItem("lastPSRT",String(e.result));var t=j(String(e.result));r(t),ye(t),ke(t[I].reduce((function(e,t){var a=t.index;return a>e?a:e}),0)+1),Ie(t)})),type:"file",style:{visibility:"hidden",height:"0px"},placeholder:"Image"})]}),Object(n.jsx)(h.a,{className:" col-2",onClick:function(){var e={page1:[]};ye(e),r(e),F("page1"),G(0),ke(0)},variant:"danger",children:"Clear All"})]}),Object(n.jsxs)(g.a,{style:{alignItems:"flex-end"},children:[Object(n.jsxs)(f.a.Group,{className:" col-3 mb-0",controlId:"formPage",children:[Object(n.jsx)(f.a.Label,{children:"Page"}),Object(n.jsx)(f.a.Control,{value:I,onChange:function(e){return F(e.target.value)},placeholder:"Page"})]}),Object(n.jsx)(h.a,{className:" col-2",onClick:function(){_&&(r(Object(o.a)(Object(o.a)({},me),{},Object(O.a)({},I,[{index:parseInt(String(0)),x:parseFloat(String(J)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(V)),text:te,style:Object(o.a)(Object(o.a)({},se),{},{backgroundColor:m})}]))),ye(Object(o.a)(Object(o.a)({},me),{},Object(O.a)({},I,[{index:parseInt(String(0)),x:parseFloat(String(J)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(V)),text:te,style:Object(o.a)({},se)}]))),Ie(l),G(0),ke(1),d(I),Ie())},disabled:!_,variant:"primary",children:"Add page"}),Object(n.jsxs)(f.a.Group,{className:" col-3 mb-0",controlId:"formIndex",children:[Object(n.jsx)(f.a.Label,{children:"Index"}),Object(n.jsx)(f.a.Control,{value:P,onChange:function(e){return G(e.target.value)},type:"number",min:"0",max:null===(a=l[String(I)])||void 0===a?void 0:a.length,step:"1",placeholder:"index"})]}),Object(n.jsx)(h.a,{className:" col-2",onClick:function(){r((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(O.a)({},I,[].concat(Object(p.a)(e[I]),[{index:parseInt(String(we)),x:parseFloat(String(J)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(V)),text:te,style:Object(o.a)(Object(o.a)({},se),{},{backgroundColor:m})}])))})),ye((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(O.a)({},I,[].concat(Object(p.a)(e[I]),[{index:parseInt(String(we)),x:parseFloat(String(J)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(V)),text:te,style:Object(o.a)({},se)}])))})),G(we),ke((function(e){return e+1}))},variant:"primary",children:"Add Text"})]}),Object(n.jsxs)(g.a,{children:[Object(n.jsxs)(f.a.Group,{className:" col-3",controlId:"formX",children:[Object(n.jsx)(f.a.Label,{children:"X axis"}),Object(n.jsx)(f.a.Control,{value:J,onChange:function(e){return D(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"X"})]}),Object(n.jsxs)(f.a.Group,{className:" col-3",controlId:"formY",children:[Object(n.jsx)(f.a.Label,{children:"Y axis"}),Object(n.jsx)(f.a.Control,{value:X,onChange:function(e){return Y(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"Y"})]}),Object(n.jsxs)(f.a.Group,{className:" col-3",controlId:"formY",children:[Object(n.jsx)(f.a.Label,{children:"Size"}),Object(n.jsx)(f.a.Control,{value:V,onChange:function(e){return Q(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"size"})]}),Object(n.jsxs)(f.a.Group,{className:" col-3",controlId:"formWidth",children:[Object(n.jsx)(f.a.Label,{children:"Width"}),Object(n.jsx)(f.a.Control,{value:H,onChange:function(e){return M(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"width"})]})]}),Object(n.jsxs)(g.a,{children:[Object(n.jsxs)(f.a.Group,{className:" col-8",controlId:"formText",children:[Object(n.jsx)(f.a.Label,{children:"Text"}),Object(n.jsx)(f.a.Control,{value:te,onChange:function(e){return ae(e.target.value)},type:"text",placeholder:"width"})]}),Object.keys(se).length>0&&Object(n.jsx)(v.a,{className:"col-4",variant:"secondary",id:"dropdown-basic-button",title:"Styles",children:Object.keys(se).length>0&&(null===(i=Object.keys(se))||void 0===i?void 0:i.map((function(e){return Object(n.jsx)(x.a.Item,{onClick:function(){return function(e){he(se[e]),Oe(e);var t=Object(o.a)({},se);delete t[e],ue(t)}(e)},children:"".concat(e.replaceAll("_"," ")," : ").concat(se[e])},e)})))})]}),Object(n.jsxs)(g.a,{children:[Object(n.jsx)(f.a.Group,{className:" col-4",controlId:"formKeyStyle",children:Object(n.jsx)(f.a.Control,{value:je,onChange:function(e){return Oe(e.target.value)},type:"text",placeholder:"key"})}),Object(n.jsx)(f.a.Group,{className:" col-4",controlId:"formValueStyle",children:Object(n.jsx)(f.a.Control,{value:ge,onChange:function(e){return he(e.target.value)},type:"text",placeholder:"value"})}),Object(n.jsx)(h.a,{style:{height:"100%"},className:"p-2 col-4 btn-secondary",onClick:function(){ue((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(O.a)({},je,ge))})),he(""),Oe("")},children:"Add Style"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(h.a,{onClick:function(){return y(function(e){var t="";return Object.keys(e).filter((function(e){return"__global_style__"!==e})).map((function(a){var n;t+="$START ".concat(a,"/").concat(JSON.stringify((null===e||void 0===e?void 0:e.__global_style__)||{}),"\n"),null===(n=e[a])||void 0===n||n.map((function(e,a){var n=e.x,c=e.y,i=e.size,l=e.width,r=e.text,o=e.style,s=e.index;t+=">>".concat(n,"-").concat(c,"-").concat(i,"-").concat(l,"/").concat(JSON.stringify(o),"/").concat(s||a,"\n"),t+="".concat(r,"\n\n")})),t+="$END ".concat(a,"\n\n")})),t}(me),"sub.psrt","jpg")},variant:"primary",children:"Dowload Subtitle (.psrt)"}),Object(n.jsx)(h.a,{onClick:function(){return y(JSON.stringify(me),"sub.json","jpg")},variant:"primary",children:"Dowload Subtitle (.json)"})]})]})]})};a(48);var k=function(){var e=Object(c.useState)(localStorage.getItem("lastImage")||"assets/-fasc-nio-asi-tico-tsuki-ga-michibiku-isekai-douchuu-vol06-cap39-pag02.jpg"),t=Object(s.a)(e,2),a=t[0],i=t[1],l=Object(c.useState)({}),r=Object(s.a)(l,2),u=r[0],d=r[1],O=Object(c.useState)(localStorage.getItem("lastPSRT")?j(localStorage.getItem("lastPSRT")||""):function(e){var t={},a=new XMLHttpRequest;return a.open("GET",e,!1),a.onreadystatechange=function(){4===a.readyState&&(200!==a.status&&0!=a.status||(t=Object(o.a)({},j(a.responseText))))},a.send(null),t}("assets/-fasc-nio-asi-tico-tsuki-ga-michibiku-isekai-douchuu-vol06-cap39-pag02_.psrt")),p=Object(s.a)(O,2),f=p[0],g=p[1],h=Object(c.useState)("page1"),v=Object(s.a)(h,2),x=v[0],m=v[1];return Object(n.jsxs)("div",{className:"App container",style:{display:"flex"},children:[Object(n.jsx)(w,{sub:f,setSub:g,page:x,setPage:m,setImage:i,setImageStyle:d}),Object(n.jsxs)("div",{children:[Object(n.jsx)(b,{imgPath:a,page:x,subtitle:f}),Object(n.jsx)(b,{style:Object(o.a)({width:"1300px"},u),imgPath:a,page:x,subtitle:f})]})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,57)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),i(e),l(e)}))};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),I()}},[[49,1,2]]]);
//# sourceMappingURL=main.f568c18f.chunk.js.map