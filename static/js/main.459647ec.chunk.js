(this.webpackJsonpsrt2=this.webpackJsonpsrt2||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),i=n.n(c),r=n(20),o=n.n(r),l=(n(42),n(7)),s=n(8),u=(n(43),n(36)),d=function(e){var t=e.text,n=e.x,c=e.y,i=e.width,r=e.size,o=e.style,s=e.id;return Object(a.jsx)("p",{id:"".concat(s),style:Object(l.a)({position:"absolute",top:"".concat(c,"%"),left:"".concat(n,"%"),width:"".concat(i,"%"),fontSize:"".concat(r,"px")},o),children:t})},j=function(e){var t,n=e.imgPath,i=e.subtitle,r=e.page,o=Object(u.a)(e,["imgPath","subtitle","page"]),j=Object(c.useRef)(null),b=Object(c.useState)(0),O=Object(s.a)(b,2),p=O[0],f=O[1],h=Object(c.useState)(0),x=Object(s.a)(h,2),v=x[0],g=x[1],m=Object(c.useState)(0),y=Object(s.a)(m,2),S=y[0],C=y[1],w=Object(c.useState)(0),k=Object(s.a)(w,2),F=k[0],I=k[1],N=function(){var e,t,n,a;f(null===(e=j.current)||void 0===e?void 0:e.offsetTop),g(null===(t=j.current)||void 0===t?void 0:t.offsetLeft),C(null===(n=j.current)||void 0===n?void 0:n.offsetHeight),I(null===(a=j.current)||void 0===a?void 0:a.offsetWidth)};return Object(c.useEffect)((function(){return window.addEventListener("resize",N),function(){window.removeEventListener("resize",N)}}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{position:"absolute",zIndex:11,top:p,left:v,width:F,height:S},children:null===(t=i[r])||void 0===t?void 0:t.sort((function(e,t){return e.index-t.index})).map((function(e){var t=e.text,n=e.x,c=e.y,i=e.width,r=e.size,o=e.style,l=e.index;return Object(a.jsx)(d,{id:l,text:t,x:n,y:c,width:i,size:r*F/100,style:o},l)}))}),Object(a.jsx)("img",Object(l.a)({onLoad:N,ref:j,src:n,alt:r},o))]})},b=function(e){var t={},n="",a=0,c=0;return e.split("\n").map((function(e){if(e.includes("$START"))n=e.substring(6).trim(),t[e.substring(6).trim()]=[];else if(e.includes("$END"))n="";else if(e.includes(">>")){var i,r,o=e.substring(2),l=o.split("/")[0].split("-"),u=Object(s.a)(l,4),d=u[0],j=u[1],b=u[2],O=u[3];null===(i=t[n])||void 0===i||i.push({index:o.split("/")[2]?parseInt(o.split("/")[2]):c+a,x:parseFloat(d),y:parseFloat(j),size:parseFloat(b),width:parseFloat(O),style:JSON.parse(null===(r=o.split("/"))||void 0===r?void 0:r[1])}),c=o.split("/")[2]?parseInt(o.split("/")[2]):c,a+=1}else if(e.length>1){var p,f;if((null===(p=t[n])||void 0===p?void 0:p.length)>0)t[n][(null===(f=t[n])||void 0===f?void 0:f.length)-1].text=e}})),t},O=n(10),p=n(18),f=n(56),h=n(54),x=n(31),v=n(55),g=n(35);function m(e,t,n){var a=new Blob([e],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,t);else{var c=document.createElement("a"),i=URL.createObjectURL(a);c.href=i,c.download=t,document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(i)}),0)}}var y=function(e){return function(t){var n=t.target.files;if(FileReader&&n&&n.length){var a=new FileReader;a.onload=function(){return e(a)},a.readAsDataURL(n[0])}}},S=function(e){return function(t){var n=t.target.files;if(FileReader&&n&&n.length){var a=new FileReader;a.onload=function(){return e(a)},a.readAsText(n[0])}}},C=function(e){var t,n,i,r=e.sub,o=e.setSub,u=e.page,d=e.setPage,j=e.setImage,C=(e.setImageStyle,Object(c.useState)(u||"page1")),w=Object(s.a)(C,2),k=w[0],F=w[1],I=Object(c.useState)(!1),N=Object(s.a)(I,2),L=N[0],z=N[1],T=Object(c.useState)(1),R=Object(s.a)(T,2),G=R[0],E=R[1],P=Object(c.useState)(0),A=Object(s.a)(P,2),D=A[0],B=A[1],J=Object(c.useState)(0),U=Object(s.a)(J,2),X=U[0],Y=U[1],$=Object(c.useState)(0),W=Object(s.a)($,2),H=W[0],M=W[1],_=Object(c.useState)(0),q=Object(s.a)(_,2),K=q[0],V=q[1],Q=Object(c.useState)(""),Z=Object(s.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(c.useState)(!0),ae=Object(s.a)(ne,2),ce=ae[0],ie=ae[1],re=Object(c.useState)({}),oe=Object(s.a)(re,2),le=oe[0],se=oe[1],ue=Object(c.useState)(""),de=Object(s.a)(ue,2),je=de[0],be=de[1],Oe=Object(c.useState)(""),pe=Object(s.a)(Oe,2),fe=pe[0],he=pe[1],xe=Object(c.useState)(r||{}),ve=Object(s.a)(xe,2),ge=ve[0],me=ve[1],ye=Object(c.useState)((null===(t=r["".concat(k)])||void 0===t?void 0:t.reduce((function(e,t){return t.index>e?t.index:e}),0))+1),Se=Object(s.a)(ye,2),Ce=Se[0],we=Se[1];Object(c.useEffect)((function(){!function(){if(console.log(Object.keys(ge)),Object.keys(ge).includes(k))try{o((function(e){var t;return Object(l.a)(Object(l.a)({},e),{},Object(O.a)({},k,Object(p.a)(null===(t=e[k])||void 0===t?void 0:t.map((function(e){return console.log(e.index,G),e.index===parseInt(String(G))?Object(l.a)(Object(l.a)({},e),{},{x:parseFloat(D),y:parseFloat(X),width:parseFloat(H),size:parseFloat(K),text:ee,style:Object(l.a)(Object(l.a)({},le),{},{backgroundColor:"#0f0"})}):("#0f0"===e.style.backgroundColor&&delete e.style.backgroundColor,e)})))))})),me((function(e){var t;return Object(l.a)(Object(l.a)({},e),{},Object(O.a)({},k,Object(p.a)(null===ge||void 0===ge||null===(t=ge[k])||void 0===t?void 0:t.map((function(e){return e.index===parseInt(String(G))?Object(l.a)(Object(l.a)({},e),{},{x:parseFloat(D),y:parseFloat(X),width:parseFloat(H),size:parseFloat(K),text:ee,style:Object(l.a)({},le)}):Object(l.a)({},e)})))))}))}catch(e){console.log(e)}}()}),[D,X,H,K,ee,le,u]);var ke=function(e){if(k){var t,n=null===(t=(e||r)[k])||void 0===t?void 0:t.find((function(e){return e.index===parseInt(String(G))}));B((function(e){return(null===n||void 0===n?void 0:n.x)||e})),Y((function(e){return(null===n||void 0===n?void 0:n.y)||e})),M((function(e){return(null===n||void 0===n?void 0:n.width)||e})),V((function(e){return(null===n||void 0===n?void 0:n.size)||e})),te((null===n||void 0===n?void 0:n.text)||""),se((function(e){return(null===n||void 0===n?void 0:n.style)?Object(l.a)({},null===n||void 0===n?void 0:n.style):Object(l.a)({},e)}))}};return Object(c.useEffect)((function(){ke()}),[G,k]),Object(c.useEffect)((function(){var e;z(!Object.keys(r).includes(k)),Object.keys(r).includes(k)&&d(k),we((null===(e=ge[k])||void 0===e?void 0:e.reduce((function(e,t){var n=t.index;return n>e?n:e}),0))+1)}),[k]),Object(a.jsxs)(f.a,{style:{position:"fixed",width:"500px",left:0,overflowY:"auto",overflowX:"hidden",zIndex:50},children:[Object(a.jsxs)("div",{className:"form-check form-switch mr-0",children:[Object(a.jsx)("input",{className:"form-check-input",type:"checkbox",onClick:function(){return ie((function(e){return!e}))},id:"flexSwitchCheckChecked",checked:ce}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckChecked",children:"Settings"})]}),ce&&Object(a.jsxs)("div",{children:[Object(a.jsxs)(h.a,{className:"mb-2",children:[Object(a.jsxs)(f.a.Group,{className:" col-4 mb-0",controlId:"subtitle-file",children:[Object(a.jsx)(f.a.Label,{className:"btn btn-primary",children:"Load Image"}),Object(a.jsx)(f.a.Control,{onChange:y((function(e){return j(String(e.result))})),type:"file",style:{visibility:"hidden",height:"0px"},placeholder:"Image"})]}),Object(a.jsxs)(f.a.Group,{className:" col-4 mb-0",controlId:"image-file",children:[Object(a.jsx)(f.a.Label,{className:"btn btn-primary",children:"Load SubTitle"}),Object(a.jsx)(f.a.Control,{onChange:S((function(e){var t=b(String(e.result));o(t),me(t),we(t[k].reduce((function(e,t){var n=t.index;return n>e?n:e}),0)+1),ke(t)})),type:"file",style:{visibility:"hidden",height:"0px"},placeholder:"Image"})]}),Object(a.jsx)(x.a,{className:" col-2",onClick:function(){var e={page1:[]};me(e),o(e),F("page1"),E(0),we(0)},variant:"danger",children:"Clear All"})]}),Object(a.jsxs)(h.a,{style:{alignItems:"flex-end"},children:[Object(a.jsxs)(f.a.Group,{className:" col-3 mb-0",controlId:"formPage",children:[Object(a.jsx)(f.a.Label,{children:"Page"}),Object(a.jsx)(f.a.Control,{value:k,onChange:function(e){return F(e.target.value)},placeholder:"Page"})]}),Object(a.jsx)(x.a,{className:" col-2",onClick:function(){L&&(o(Object(l.a)(Object(l.a)({},ge),{},Object(O.a)({},k,[{index:parseInt(String(0)),x:parseFloat(String(D)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(K)),text:ee,style:Object(l.a)(Object(l.a)({},le),{},{backgroundColor:"#0f0"})}]))),me(Object(l.a)(Object(l.a)({},ge),{},Object(O.a)({},k,[{index:parseInt(String(0)),x:parseFloat(String(D)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(K)),text:ee,style:Object(l.a)({},le)}]))),ke(r),E(0),we(1),d(k),ke())},disabled:!L,variant:"primary",children:"Add page"}),Object(a.jsxs)(f.a.Group,{className:" col-3 mb-0",controlId:"formIndex",children:[Object(a.jsx)(f.a.Label,{children:"Index"}),Object(a.jsx)(f.a.Control,{value:G,onChange:function(e){return E(e.target.value)},type:"number",min:"0",max:null===(n=r[String(k)])||void 0===n?void 0:n.length,step:"1",placeholder:"index"})]}),Object(a.jsx)(x.a,{className:" col-2",onClick:function(){o((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(O.a)({},k,[].concat(Object(p.a)(e[k]),[{index:parseInt(String(Ce)),x:parseFloat(String(D)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(K)),text:ee,style:Object(l.a)(Object(l.a)({},le),{},{backgroundColor:"#0f0"})}])))})),me((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(O.a)({},k,[].concat(Object(p.a)(e[k]),[{index:parseInt(String(Ce)),x:parseFloat(String(D)),y:parseFloat(String(X)),width:parseFloat(String(H)),size:parseFloat(String(K)),text:ee,style:Object(l.a)({},le)}])))})),E(Ce),we((function(e){return e+1}))},variant:"primary",children:"Add Text"})]}),Object(a.jsxs)(h.a,{children:[Object(a.jsxs)(f.a.Group,{className:" col-3",controlId:"formX",children:[Object(a.jsx)(f.a.Label,{children:"X axis"}),Object(a.jsx)(f.a.Control,{value:D,onChange:function(e){return B(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"X"})]}),Object(a.jsxs)(f.a.Group,{className:" col-3",controlId:"formY",children:[Object(a.jsx)(f.a.Label,{children:"Y axis"}),Object(a.jsx)(f.a.Control,{value:X,onChange:function(e){return Y(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"Y"})]}),Object(a.jsxs)(f.a.Group,{className:" col-3",controlId:"formY",children:[Object(a.jsx)(f.a.Label,{children:"Size"}),Object(a.jsx)(f.a.Control,{value:K,onChange:function(e){return V(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"size"})]}),Object(a.jsxs)(f.a.Group,{className:" col-3",controlId:"formWidth",children:[Object(a.jsx)(f.a.Label,{children:"Width"}),Object(a.jsx)(f.a.Control,{value:H,onChange:function(e){return M(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"width"})]})]}),Object(a.jsxs)(h.a,{children:[Object(a.jsxs)(f.a.Group,{className:" col-8",controlId:"formText",children:[Object(a.jsx)(f.a.Label,{children:"Text"}),Object(a.jsx)(f.a.Control,{value:ee,onChange:function(e){return te(e.target.value)},type:"text",placeholder:"width"})]}),Object.keys(le).length>0&&Object(a.jsx)(v.a,{className:"col-4",variant:"secondary",id:"dropdown-basic-button",title:"Styles",children:Object.keys(le).length>0&&(null===(i=Object.keys(le))||void 0===i?void 0:i.map((function(e){return Object(a.jsx)(g.a.Item,{onClick:function(){return function(e){he(le[e]),be(e);var t=Object(l.a)({},le);delete t[e],se(t)}(e)},children:"".concat(e.replaceAll("_"," ")," : ").concat(le[e])},e)})))})]}),Object(a.jsxs)(h.a,{children:[Object(a.jsx)(f.a.Group,{className:" col-4",controlId:"formKeyStyle",children:Object(a.jsx)(f.a.Control,{value:je,onChange:function(e){return be(e.target.value)},type:"text",placeholder:"key"})}),Object(a.jsx)(f.a.Group,{className:" col-4",controlId:"formValueStyle",children:Object(a.jsx)(f.a.Control,{value:fe,onChange:function(e){return he(e.target.value)},type:"text",placeholder:"value"})}),Object(a.jsx)(x.a,{style:{height:"100%"},className:"p-2 col-4 btn-secondary",onClick:function(){se((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(O.a)({},je,fe))})),he(""),be("")},children:"Add Style"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(x.a,{onClick:function(){return m(function(e){var t="";return Object.keys(e).map((function(n){t+="$START ".concat(n,"\n"),e[n].map((function(e,n){var a=e.x,c=e.y,i=e.size,r=e.width,o=e.text,l=e.style,s=e.index;t+=">>".concat(a,"-").concat(c,"-").concat(i,"-").concat(r," ").concat(JSON.stringify(l)," ").concat(s||n,"\n"),t+="".concat(o,"\n\n")})),t+="$END ".concat(n,"\n\n")})),t}(ge),"sub.psrt","jpg")},variant:"primary",children:"Dowload Subtitle (.psrt)"}),Object(a.jsx)(x.a,{onClick:function(){return m(JSON.stringify(ge),"sub.json","jpg")},variant:"primary",children:"Dowload Subtitle (.json)"})]})]})]})};n(48);var w=function(){var e=Object(c.useState)("assets/-fasc-nio-asi-tico-tsuki-ga-michibiku-isekai-douchuu-vol06-cap39-pag02.jpg"),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)({}),o=Object(s.a)(r,2),u=o[0],d=o[1],O=Object(c.useState)(function(e){var t={},n=new XMLHttpRequest;return n.open("GET",e,!1),n.onreadystatechange=function(){4===n.readyState&&(200!==n.status&&0!=n.status||(t=Object(l.a)({},b(n.responseText))))},n.send(null),t}("assets/-fasc-nio-asi-tico-tsuki-ga-michibiku-isekai-douchuu-vol06-cap39-pag02_.psrt")),p=Object(s.a)(O,2),f=p[0],h=p[1],x=Object(c.useState)("page1"),v=Object(s.a)(x,2),g=v[0],m=v[1];return Object(a.jsxs)("div",{className:"App container",style:{display:"flex"},children:[Object(a.jsx)(C,{sub:f,setSub:h,page:g,setPage:m,setImage:i,setImageStyle:d}),Object(a.jsxs)("div",{children:[Object(a.jsx)(j,{imgPath:n,page:g,subtitle:f}),Object(a.jsx)(j,{style:Object(l.a)({width:"1300px"},u),imgPath:n,page:g,subtitle:f})]})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root")),k()}},[[49,1,2]]]);
//# sourceMappingURL=main.459647ec.chunk.js.map