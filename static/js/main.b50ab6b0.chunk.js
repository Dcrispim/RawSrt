(this.webpackJsonpsrt2=this.webpackJsonpsrt2||[]).push([[0],{46:function(e,t,a){},47:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),l=a.n(c),i=a(21),o=a.n(i),r=(a(46),a(7)),s=a(8),u=(a(47),a(28)),d=function(e){var t=e.text,a=e.x,c=e.y,l=e.width,i=e.size,o=e.style,s=e.id,u=e.globalStyle,d=e.editStyles;return Object(n.jsx)("p",{id:"".concat(s),style:Object(r.a)(Object(r.a)(Object(r.a)({position:"absolute",top:"".concat(c,"%"),left:"".concat(a,"%"),width:"".concat(l,"%"),fontSize:"".concat(i,"px")},o),u),d),children:t})},b=function(e){var t,a=e.imgPath,l=e.subtitle,i=e.page,o=e.editStyles,b=Object(u.a)(e,["imgPath","subtitle","page","editStyles"]),j=Object(c.useRef)(null),O=Object(c.useState)(0),f=Object(s.a)(O,2),h=f[0],p=f[1],g=Object(c.useState)(0),v=Object(s.a)(g,2),x=v[0],m=v[1],y=Object(c.useState)(0),S=Object(s.a)(y,2),C=S[0],I=S[1],w=Object(c.useState)(0),k=Object(s.a)(w,2),N=k[0],F=k[1],L=function(){var e,t,a,n;p(null===(e=j.current)||void 0===e?void 0:e.offsetTop),m(null===(t=j.current)||void 0===t?void 0:t.offsetLeft),I(null===(a=j.current)||void 0===a?void 0:a.offsetHeight),F(null===(n=j.current)||void 0===n?void 0:n.offsetWidth)};return Object(c.useEffect)((function(){return window.addEventListener("resize",L),function(){window.removeEventListener("resize",L)}}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{style:{position:"absolute",zIndex:11,top:h,left:x,width:N,height:C},children:null===(t=l[i])||void 0===t?void 0:t.sort((function(e,t){return e.index-t.index})).map((function(e){var t,a=e.text,c=e.x,r=e.y,s=e.width,u=e.size,b=e.style,j=e.index;return Object(n.jsx)(d,{id:j,text:a,globalStyle:l.__global_style__,editStyles:null===o||void 0===o||null===(t=o[i])||void 0===t?void 0:t[j],x:c,y:r,width:s,size:u*N/100,style:b},j)}))}),Object(n.jsx)("img",Object(r.a)({onLoad:L,ref:j,src:a,alt:i},b))]})},j=function(e){var t={},a="",n=0,c=0;return e.split("\n").map((function(e){if(e.includes("$START"))a=e.substring(6).trim().split("|")[0],t[a]=[],e.substring(6).trim().split("|")[1]&&(t.__global_style__=JSON.parse(e.substring(6).trim().split("|")[1]));else if(e.includes("$END"))a="";else if(e.includes(">>")){var l,i,o=e.substring(2),r=o.split("|")[0].split("-"),u=Object(s.a)(r,4),d=u[0],b=u[1],j=u[2],O=u[3];null===(l=t[a])||void 0===l||l.push({index:o.split("|")[2]?parseInt(o.split("|")[2]):c+n,x:parseFloat(d),y:parseFloat(b),size:parseFloat(j),width:parseFloat(O),style:JSON.parse(null===(i=o.split("|"))||void 0===i?void 0:i[1])}),c=o.split("|")[2]?parseInt(o.split("|")[2]):c,n+=1}else if(e.length>1){var f,h;if((null===(f=t[a])||void 0===f?void 0:f.length)>0)t[a][(null===(h=t[a])||void 0===h?void 0:h.length)-1].text=e}})),t},O=a(33),f=a(12),h=a(61),p=a(58),g=a(36),v=a(59),x=a(40),m=a(35),y=a(60),S=a(34),C="#0f04",I=function(e){var t=e.placeholder,a=e.value,c=e.onChange,l=e.className,i=void 0===l?"":l,o=Object(u.a)(e,["placeholder","value","onChange","className"]);return Object(n.jsx)(y.a,{className:"mb-3 "+i,children:Object(n.jsx)(S.a,Object(r.a)({placeholder:t,"aria-label":t,"aria-describedby":"basic-addon1",onChange:function(e){return c(e.target.value)},value:a},o))})};function w(e,t,a){var n=new Blob([e],{type:a});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var c=document.createElement("a"),l=URL.createObjectURL(n);c.href=l,c.download=t,document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(l)}),0)}}var k=function(e){return function(t){var a=t.target.files;if(FileReader&&a&&a.length){var n=new FileReader;n.onload=function(){return e(n)},n.readAsDataURL(a[0])}}},N=function(e){return function(t){var a=t.target.files;if(FileReader&&a&&a.length){var n=new FileReader;n.onload=function(){return e(n)},n.readAsText(a[0])}}},F=function(e){var t,a,l,i=e.sub,o=e.setSub,u=e.page,d=e.setPage,b=e.setImage,y=e.image,S=(e.setImageStyle,e.setEditStyles),F=Object(c.useState)(u||"page1"),L=Object(s.a)(F,2),_=L[0],T=L[1],z=Object(c.useState)(!1),P=Object(s.a)(z,2),R=P[0],E=P[1],G=Object(c.useState)(1),A=Object(s.a)(G,2),D=A[0],J=A[1],B=Object(c.useState)(0),U=Object(s.a)(B,2),X=U[0],Y=U[1],$=Object(c.useState)(0),W=Object(s.a)($,2),H=W[0],M=W[1],q=Object(c.useState)(0),K=Object(s.a)(q,2),V=K[0],Q=K[1],Z=Object(c.useState)(0),ee=Object(s.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(c.useState)(""),ce=Object(s.a)(ne,2),le=ce[0],ie=ce[1],oe=Object(c.useState)(!0),re=Object(s.a)(oe,2),se=re[0],ue=re[1],de=Object(c.useState)({}),be=Object(s.a)(de,2),je=be[0],Oe=be[1],fe=Object(c.useState)(""),he=Object(s.a)(fe,2),pe=he[0],ge=he[1],ve=Object(c.useState)(""),xe=Object(s.a)(ve,2),me=xe[0],ye=xe[1],Se=Object(c.useState)("sub"),Ce=Object(s.a)(Se,2),Ie=Ce[0],we=Ce[1],ke=Object(c.useState)((null===(t=i["".concat(_)])||void 0===t?void 0:t.reduce((function(e,t){return t.index>e?t.index:e}),0))+1),Ne=Object(s.a)(ke,2),Fe=Ne[0],Le=Ne[1];Object(c.useEffect)((function(){!function(){if(S(Object(f.a)({},_,Object(f.a)({},D,{backgroundColor:C}))),Object.keys(i).includes(_))try{o((function(e){var t;return Object(r.a)(Object(r.a)({},e),{},Object(f.a)({},_,Object(O.a)(null===(t=e[_])||void 0===t?void 0:t.map((function(e){return e.index===parseInt(String(D))?Object(r.a)(Object(r.a)({},e),{},{x:parseFloat(X),y:parseFloat(H),width:parseFloat(V),size:parseFloat(te),text:le,style:Object(r.a)({},je)}):e})))))}))}catch(e){console.log(e)}}()}),[X,H,V,te,le,je,u]);var _e=function(e){if(_){var t,a=null===(t=(e||i)[_])||void 0===t?void 0:t.find((function(e){return e.index===parseInt(String(D))}));Y((function(e){return(null===a||void 0===a?void 0:a.x)||e})),M((function(e){return(null===a||void 0===a?void 0:a.y)||e})),Q((function(e){return(null===a||void 0===a?void 0:a.width)||e})),ae((function(e){return(null===a||void 0===a?void 0:a.size)||e})),ie((null===a||void 0===a?void 0:a.text)||""),Oe((function(e){return(null===a||void 0===a?void 0:a.style)?Object(r.a)({},null===a||void 0===a?void 0:a.style):Object(r.a)({},e)}))}};return Object(c.useEffect)((function(){_e()}),[D,_]),Object(c.useEffect)((function(){var e;E(!Object.keys(i).includes(_)),Object.keys(i).includes(_)&&d(_),Le((null===(e=i[_])||void 0===e?void 0:e.reduce((function(e,t){var a=t.index;return a>e?a:e}),0))+1)}),[_]),Object(n.jsxs)(h.a,{style:{position:"fixed",width:"500px",left:0,overflowY:"auto",overflowX:"hidden",zIndex:50},children:[Object(n.jsxs)("div",{className:"form-check form-switch mr-0",children:[Object(n.jsx)("input",{className:"form-check-input",type:"checkbox",onClick:function(){return ue((function(e){return!e}))},id:"flexSwitchCheckChecked",checked:se}),Object(n.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckChecked",children:"Settings"})]}),se&&Object(n.jsxs)("div",{children:[Object(n.jsxs)(p.a,{className:"mb-2",children:[Object(n.jsxs)(h.a.Group,{className:" col-4 mb-0",controlId:"subtitle-file",children:[Object(n.jsx)(h.a.Label,{className:"btn btn-primary",children:"Load Image"}),Object(n.jsx)(h.a.Control,{readOnly:!0,onChange:k((function(e){localStorage.setItem("lastImage",String(e.result)),b(String(e.result))})),type:"file",style:{visibility:"hidden",height:"0px"},placeholder:"Image"})]}),Object(n.jsxs)(h.a.Group,{className:" col-4 mb-0",controlId:"image-file",children:[Object(n.jsx)(h.a.Label,{className:"btn btn-primary",children:"Load SubTitle"}),Object(n.jsx)(h.a.Control,{readOnly:!0,onChange:N((function(e){var t;localStorage.setItem("lastPSRT",String(e.result));var a=j(String(e.result));o(a),Le((null===(t=a[_])||void 0===t?void 0:t.reduce((function(e,t){var a=t.index;return a>e?a:e}),0))+1),_e(a)})),type:"file",style:{visibility:"hidden",height:"0px"},placeholder:"Image"})]}),Object(n.jsx)(g.a,{className:" col-2",onClick:function(){o({page1:[]}),T("page1"),J(0),Le(0)},variant:"danger",children:"Clear All"}),Object(n.jsx)(I,{className:"mt-2 col-12",value:(null===y||void 0===y?void 0:y.includes("base64"))?"File":y,placeholder:"Image Link",onChange:function(e){b((function(t){return"File"===e?t:e}))}})]}),Object(n.jsxs)(p.a,{style:{alignItems:"flex-end"},children:[Object(n.jsxs)(h.a.Group,{className:" col-3 mb-0",controlId:"formPage",children:[Object(n.jsx)(h.a.Label,{children:"Page"}),Object(n.jsx)(h.a.Control,{value:_,onChange:function(e){return T(e.target.value)},placeholder:"Page"})]}),Object(n.jsx)(g.a,{className:" col-2",onClick:function(){R&&(o(Object(r.a)(Object(r.a)({},i),{},Object(f.a)({},_,[{index:parseInt(String(0)),x:parseFloat(String(X)),y:parseFloat(String(H)),width:parseFloat(String(V)),size:parseFloat(String(te)),text:le,style:Object(r.a)(Object(r.a)({},je),{},{backgroundColor:C})}]))),_e(i),J(0),Le(1),d(_),_e())},disabled:!R,variant:"primary",children:"Add page"}),Object(n.jsxs)(h.a.Group,{className:" col-3 mb-0",controlId:"formIndex",children:[Object(n.jsx)(h.a.Label,{children:"Index"}),Object(n.jsx)(h.a.Control,{value:D,onChange:function(e){return J(e.target.value)},type:"number",min:"0",max:null===(a=i[String(_)])||void 0===a?void 0:a.length,step:"1",placeholder:"index"})]}),Object(n.jsx)(g.a,{className:" col-2",onClick:function(){o((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(f.a)({},_,[].concat(Object(O.a)(e[_]),[{index:parseInt(String(Fe)),x:parseFloat(String(X)),y:parseFloat(String(H)),width:parseFloat(String(V)),size:parseFloat(String(te)),text:le,style:Object(r.a)(Object(r.a)({},je),{},{backgroundColor:C})}])))})),J(Fe),Le((function(e){return e+1}))},variant:"primary",children:"Add Text"})]}),Object(n.jsxs)(p.a,{children:[Object(n.jsxs)(h.a.Group,{className:" col-3",controlId:"formX",children:[Object(n.jsx)(h.a.Label,{children:"X axis"}),Object(n.jsx)(h.a.Control,{value:X,onChange:function(e){return Y(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"X"})]}),Object(n.jsxs)(h.a.Group,{className:" col-3",controlId:"formY",children:[Object(n.jsx)(h.a.Label,{children:"Y axis"}),Object(n.jsx)(h.a.Control,{value:H,onChange:function(e){return M(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"Y"})]}),Object(n.jsxs)(h.a.Group,{className:" col-3",controlId:"formY",children:[Object(n.jsx)(h.a.Label,{children:"Size"}),Object(n.jsx)(h.a.Control,{value:te,onChange:function(e){return ae(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"size"})]}),Object(n.jsxs)(h.a.Group,{className:" col-3",controlId:"formWidth",children:[Object(n.jsx)(h.a.Label,{children:"Width"}),Object(n.jsx)(h.a.Control,{value:V,onChange:function(e){return Q(e.target.value)},type:"number",min:"0",max:"100",step:"0.1",placeholder:"width"})]})]}),Object(n.jsxs)(p.a,{children:[Object(n.jsxs)(h.a.Group,{className:" col-8",controlId:"formText",children:[Object(n.jsx)(h.a.Label,{children:"Text"}),Object(n.jsx)(h.a.Control,{value:le,onChange:function(e){return ie(e.target.value)},type:"text",placeholder:"width"})]}),Object.keys(je).length>0&&Object(n.jsx)(v.a,{className:"col-4",variant:"secondary",id:"dropdown-basic-button",title:"Styles",children:Object.keys(je).length>0&&(null===(l=Object.keys(je))||void 0===l?void 0:l.map((function(e){return Object(n.jsx)(x.a.Item,{onClick:function(){return function(e){ye(je[e]),ge(e);var t=Object(r.a)({},je);delete t[e],Oe(t)}(e)},children:"".concat(e.replaceAll("_"," ")," : ").concat(je[e])},e)})))})]}),Object(n.jsxs)(p.a,{children:[Object(n.jsx)(h.a.Group,{className:" col-4",controlId:"formKeyStyle",children:Object(n.jsx)(h.a.Control,{value:pe,onChange:function(e){return ge(e.target.value)},type:"text",placeholder:"key"})}),Object(n.jsx)(h.a.Group,{className:" col-4",controlId:"formValueStyle",children:Object(n.jsx)(h.a.Control,{value:me,onChange:function(e){return ye(e.target.value)},type:"text",placeholder:"value"})}),Object(n.jsx)(g.a,{style:{height:"100%"},className:"p-2 col-4 btn-secondary",onClick:function(){Oe((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(f.a)({},pe,me))})),ye(""),ge("")},children:"Add Style"})]}),Object(n.jsxs)(p.a,{children:[Object(n.jsxs)(h.a.Group,{className:" col-6",controlId:"formDownload",children:[Object(n.jsx)(h.a.Label,{children:"Download Subtitle"}),Object(n.jsx)(h.a.Control,{value:Ie,onChange:function(e){return we(e.target.value)},placeholder:"Download Subtitle"})]}),Object(n.jsxs)(m.a,{className:" col-6",children:[Object(n.jsx)(g.a,{className:" col-12 mb-2",disabled:!Ie,onClick:function(){return w(function(e){var t="";return Object.keys(e).filter((function(e){return"__global_style__"!==e})).map((function(a){var n;t+="$START ".concat(a,"/").concat(JSON.stringify((null===e||void 0===e?void 0:e.__global_style__)||{}),"\n"),null===(n=e[a])||void 0===n||n.map((function(e,a){var n=e.x,c=e.y,l=e.size,i=e.width,o=e.text,r=e.style,s=e.index;t+=">>".concat(n,"-").concat(c,"-").concat(l,"-").concat(i,"/").concat(JSON.stringify(r),"/").concat(s||a,"\n"),t+="".concat(o,"\n\n")})),t+="$END ".concat(a,"\n\n")})),t}(i),"".concat(Ie,".psrt"),"*.psrt")},variant:"primary",children:"(.psrt)"}),Object(n.jsx)(g.a,{className:" col-12",disabled:!Ie,onClick:function(){return w(JSON.stringify(i),"".concat(Ie,".json"),"*.json")},variant:"primary",children:"(.json)"})]})]})]})]})};a(52);var L=function(){var e=Object(c.useState)(localStorage.getItem("lastImage")||"assets/-fasc-nio-asi-tico-tsuki-ga-michibiku-isekai-douchuu-vol06-cap39-pag02.jpg"),t=Object(s.a)(e,2),a=t[0],l=t[1],i=Object(c.useState)({}),o=Object(s.a)(i,2),u=o[0],d=o[1],O=Object(c.useState)(localStorage.getItem("lastPSRT")?j(localStorage.getItem("lastPSRT")||""):function(e){var t={},a=new XMLHttpRequest;return a.open("GET",e,!1),a.onreadystatechange=function(){4===a.readyState&&(200!==a.status&&0!=a.status||(t=Object(r.a)({},j(a.responseText))))},a.send(null),t}("assets/-fasc-nio-asi-tico-tsuki-ga-michibiku-isekai-douchuu-vol06-cap39-pag02_.psrt")),f=Object(s.a)(O,2),h=f[0],p=f[1],g=Object(c.useState)(localStorage.getItem("lastPage")||"page1"),v=Object(s.a)(g,2),x=v[0],m=v[1],y=Object(c.useState)({}),S=Object(s.a)(y,2),C=S[0],I=S[1];return Object(c.useEffect)((function(){localStorage.setItem("lastPage",x)}),[x]),Object(c.useEffect)((function(){localStorage.setItem("lastImage",a)}),[a]),Object(n.jsxs)("div",{className:"App container",style:{display:"flex"},children:[Object(n.jsx)(F,{sub:h,setSub:p,page:x,setPage:m,setImage:l,image:a,setImageStyle:d,setEditStyles:I}),Object(n.jsxs)("div",{children:[Object(n.jsx)(b,{editStyles:C,imgPath:a,page:x,subtitle:h}),Object(n.jsx)(b,{style:Object(r.a)({width:"1300px"},u),editStyles:C,imgPath:a,page:x,subtitle:h})]})]})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,l=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),l(e),i(e)}))};o.a.render(Object(n.jsx)(l.a.StrictMode,{children:Object(n.jsx)(L,{})}),document.getElementById("root")),_()}},[[53,1,2]]]);
//# sourceMappingURL=main.b50ab6b0.chunk.js.map