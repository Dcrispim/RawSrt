{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/intelie/Documents/srt2/src/cmponents/EditSub.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react/jsx-no-undef */\nimport React, { useEffect, useState } from \"react\";\nimport { Form, Button, DropdownButton, Dropdown, Row, Col, InputGroup, FormControl } from \"react-bootstrap\";\nimport { parseObjectToPSRT, parsePSRTToObject } from \"../service/subtitle\";\nconst BG_SELECT_COLOR = \"#0f04\"; //import DragScaleBar from 'react-drag-scale-bar'\n// import { Container } from './styles';\n\nconst EditSub = ({\n  sub,\n  setSub,\n  page: defaultPage,\n  setPage: setDefaultPage,\n  setImage,\n  image,\n  setImageStyle,\n  setEditStyles\n}) => {\n  _s();\n\n  var _sub$, _sub$String, _Object$keys;\n\n  const [page, setPage] = useState(defaultPage || \"page1\");\n  const [isNewPage, setIsNewPage] = useState(false);\n  const [index, setIndex] = useState(1);\n  const [x, setX] = useState(0);\n  const [y, setY] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [size, setSize] = useState(0);\n  const [subText, setSubText] = useState(\"\");\n  const [show, setShow] = useState(true);\n  const [style, setStyle] = useState({});\n  const [keyStyle, setKeyStyle] = useState(\"\");\n  const [valueStyle, setValueStyle] = useState(\"\");\n  const [dowloadFileName, setDowloadFileName] = useState(\"sub\");\n  const [imageLink, setimageLink] = useState((image === null || image === void 0 ? void 0 : image.includes(\"base46\")) ? \"File\" : image);\n  const [lastIndex, setLastIndex] = useState(((_sub$ = sub[`${page}`]) === null || _sub$ === void 0 ? void 0 : _sub$.reduce((p, c) => c.index > p ? c.index : p, 0)) + 1);\n\n  const handleChangeSub = () => {\n    setEditStyles({\n      [page]: {\n        [index]: {\n          backgroundColor: BG_SELECT_COLOR\n        }\n      }\n    });\n\n    if (Object.keys(sub).includes(page)) {\n      try {\n        setSub(data => {\n          var _data$page;\n\n          return { ...data,\n            [page]: [...((_data$page = data[page]) === null || _data$page === void 0 ? void 0 : _data$page.map(txt => {\n              if (txt.index === parseInt(String(index))) {\n                return { ...txt,\n                  x: parseFloat(x),\n                  y: parseFloat(y),\n                  width: parseFloat(width),\n                  size: parseFloat(size),\n                  text: subText,\n                  style: { ...style\n                  }\n                };\n              } else {\n                return txt;\n              }\n            }))]\n          };\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  useEffect(() => {\n    //console.log(sub);\n    handleChangeSub(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [x, y, width, size, subText, style, defaultPage]);\n\n  const updateSubInfos = newSub => {\n    const _sub = newSub || sub;\n\n    if (page) {\n      var _sub$page;\n\n      const text = (_sub$page = _sub[page]) === null || _sub$page === void 0 ? void 0 : _sub$page.find(a => a.index === parseInt(String(index)));\n      setX(oldX => (text === null || text === void 0 ? void 0 : text.x) || oldX);\n      setY(oldY => (text === null || text === void 0 ? void 0 : text.y) || oldY);\n      setWidth(oldW => (text === null || text === void 0 ? void 0 : text.width) || oldW);\n      setSize(oldS => (text === null || text === void 0 ? void 0 : text.size) || oldS);\n      setSubText((text === null || text === void 0 ? void 0 : text.text) || \"\");\n      setStyle(old => (text === null || text === void 0 ? void 0 : text.style) ? { ...(text === null || text === void 0 ? void 0 : text.style)\n      } : { ...old\n      });\n    }\n  };\n\n  const addNewText = () => {\n    setSub(data => ({ ...data,\n      [page]: [...data[page], {\n        index: parseInt(String(lastIndex)),\n        x: parseFloat(String(x)),\n        y: parseFloat(String(y)),\n        width: parseFloat(String(width)),\n        size: parseFloat(String(size)),\n        text: subText,\n        style: { ...style,\n          backgroundColor: BG_SELECT_COLOR\n        }\n      }]\n    }));\n    setIndex(lastIndex);\n    setLastIndex(old => old + 1);\n  };\n\n  const addNewPage = () => {\n    if (isNewPage) {\n      setSub({ ...sub,\n        [page]: [{\n          index: parseInt(String(0)),\n          x: parseFloat(String(x)),\n          y: parseFloat(String(y)),\n          width: parseFloat(String(width)),\n          size: parseFloat(String(size)),\n          text: subText,\n          style: { ...style,\n            backgroundColor: BG_SELECT_COLOR\n          }\n        }]\n      });\n      updateSubInfos(sub);\n      setIndex(0);\n      setLastIndex(1);\n      setDefaultPage(page);\n      updateSubInfos();\n    }\n  };\n\n  const updateSubtitleFile = fr => {\n    var _newSub$page;\n\n    localStorage.setItem(\"lastPSRT\", String(fr.result));\n    const newSub = parsePSRTToObject(String(fr.result));\n    setSub(newSub);\n    setLastIndex(((_newSub$page = newSub[page]) === null || _newSub$page === void 0 ? void 0 : _newSub$page.reduce((p, {\n      index\n    }) => index > p ? index : p, 0)) + 1);\n    updateSubInfos(newSub);\n  };\n\n  const showImage = fr => {\n    localStorage.setItem(\"lastImage\", String(fr.result));\n    setImage(String(fr.result));\n  };\n\n  const handleAddStyle = () => {\n    setStyle(old => ({ ...old,\n      [keyStyle]: valueStyle\n    }));\n    setValueStyle(\"\");\n    setKeyStyle(\"\");\n  };\n\n  const handleRemoveStyle = key => {\n    setValueStyle(style[key]);\n    setKeyStyle(key);\n    const newStyles = { ...style\n    };\n    delete newStyles[key];\n    setStyle(newStyles);\n  };\n\n  const handleClearAll = () => {\n    const newSub = {\n      page1: []\n    };\n    setSub(newSub);\n    setPage(\"page1\");\n    setIndex(0);\n    setLastIndex(0);\n  };\n\n  useEffect(() => {\n    updateSubInfos();\n  }, [index, page]);\n  useEffect(() => {\n    var _sub$page2;\n\n    setIsNewPage(!Object.keys(sub).includes(page));\n    Object.keys(sub).includes(page) && setDefaultPage(page);\n    setLastIndex(((_sub$page2 = sub[page]) === null || _sub$page2 === void 0 ? void 0 : _sub$page2.reduce((p, {\n      index\n    }) => index > p ? index : p, 0)) + 1);\n  }, [page]);\n  return /*#__PURE__*/_jsxDEV(Form, {\n    style: {\n      position: \"fixed\",\n      width: \"500px\",\n      left: 0,\n      overflowY: \"auto\",\n      overflowX: \"hidden\",\n      zIndex: 50\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `form-check form-switch mr-0`,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        onClick: () => setShow(a => !a),\n        id: \"flexSwitchCheckChecked\",\n        checked: show\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"flexSwitchCheckChecked\",\n        children: \"Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), show && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-4 mb-0\",\n          controlId: \"subtitle-file\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"btn btn-primary\",\n            children: \"Load Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            onChange: getLocalImage(showImage),\n            type: \"file\",\n            style: {\n              visibility: \"hidden\",\n              height: \"0px\"\n            },\n            placeholder: \"Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-4 mb-0\",\n          controlId: \"image-file\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"btn btn-primary\",\n            children: \"Load SubTitle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            onChange: getLocalSubtitle(updateSubtitleFile),\n            type: \"file\",\n            style: {\n              visibility: \"hidden\",\n              height: \"0px\"\n            },\n            placeholder: \"Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \" col-2\",\n          onClick: handleClearAll,\n          variant: \"danger\",\n          children: \"Clear All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputSettings, {\n          className: \"mt-2 col-12\",\n          value: imageLink,\n          placeholder: \"Image Link\",\n          onChange: d => {\n            setimageLink((d === null || d === void 0 ? void 0 : d.includes(\"base64\")) ? \"File\" : d);\n            setImage(data => d === \"File\" ? data : d);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          alignItems: \"flex-end\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-3 mb-0\",\n          controlId: \"formPage\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: page,\n            onChange: e => setPage(e.target.value),\n            placeholder: \"Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \" col-2\",\n          onClick: addNewPage,\n          disabled: !isNewPage,\n          variant: \"primary\",\n          children: \"Add page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-3 mb-0\",\n          controlId: \"formIndex\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Index\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: index,\n            onChange: e => setIndex(e.target.value),\n            type: \"number\",\n            min: \"0\",\n            max: (_sub$String = sub[String(page)]) === null || _sub$String === void 0 ? void 0 : _sub$String.length,\n            step: \"1\",\n            placeholder: \"index\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \" col-2\",\n          onClick: addNewText,\n          variant: \"primary\",\n          children: \"Add Text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-3\",\n          controlId: \"formX\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"X axis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: x,\n            onChange: e => setX(e.target.value),\n            type: \"number\",\n            min: \"0\",\n            max: \"100\",\n            step: \"0.1\",\n            placeholder: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-3\",\n          controlId: \"formY\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Y axis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: y,\n            onChange: e => setY(e.target.value),\n            type: \"number\",\n            min: \"0\",\n            max: \"100\",\n            step: \"0.1\",\n            placeholder: \"Y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-3\",\n          controlId: \"formY\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: size,\n            onChange: e => setSize(e.target.value),\n            type: \"number\",\n            min: \"0\",\n            max: \"100\",\n            step: \"0.1\",\n            placeholder: \"size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-3\",\n          controlId: \"formWidth\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Width\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: width,\n            onChange: e => setWidth(e.target.value),\n            type: \"number\",\n            min: \"0\",\n            max: \"100\",\n            step: \"0.1\",\n            placeholder: \"width\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-8\",\n          controlId: \"formText\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: subText,\n            onChange: e => setSubText(e.target.value),\n            type: \"text\",\n            placeholder: \"width\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this), Object.keys(style).length > 0 && /*#__PURE__*/_jsxDEV(DropdownButton, {\n          className: \"col-4\",\n          variant: \"secondary\",\n          id: \"dropdown-basic-button\",\n          title: \"Styles\",\n          children: Object.keys(style).length > 0 && ((_Object$keys = Object.keys(style)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.map(styleProp => /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: () => handleRemoveStyle(styleProp),\n            children: `${styleProp.replaceAll(\"_\", \" \")} : ${style[styleProp]}`\n          }, styleProp, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 21\n          }, this)))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-4\",\n          controlId: \"formKeyStyle\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: keyStyle,\n            onChange: e => setKeyStyle(e.target.value),\n            type: \"text\",\n            placeholder: \"key\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-4\",\n          controlId: \"formValueStyle\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: valueStyle,\n            onChange: e => setValueStyle(e.target.value),\n            type: \"text\",\n            placeholder: \"value\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            height: \"100%\"\n          },\n          className: \"p-2 col-4 btn-secondary\",\n          onClick: handleAddStyle,\n          children: \"Add Style\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \" col-6\",\n          controlId: \"formDownload\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Download Subtitle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: dowloadFileName,\n            onChange: e => setDowloadFileName(e.target.value),\n            placeholder: \"Download Subtitle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          className: \" col-6\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \" col-12 mb-2\",\n            disabled: !dowloadFileName,\n            onClick: () => download(parseObjectToPSRT(sub), `${dowloadFileName}.psrt`, \"*.psrt\"),\n            variant: \"primary\",\n            children: \"(.psrt)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \" col-12\",\n            disabled: !dowloadFileName,\n            onClick: () => download(JSON.stringify(sub), `${dowloadFileName}.json`, \"*.json\"),\n            variant: \"primary\",\n            children: \"(.json)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditSub, \"jQ29xCph+rWSkArB0Wf+FMsht3o=\");\n\n_c = EditSub;\n\nconst InputSettings = ({\n  placeholder,\n  value,\n  onChange,\n  className = \"\",\n  ...otherProps\n}) => {\n  return /*#__PURE__*/_jsxDEV(InputGroup, {\n    className: \"mb-3 \" + className,\n    children: /*#__PURE__*/_jsxDEV(FormControl, {\n      placeholder: placeholder,\n      \"aria-label\": placeholder,\n      \"aria-describedby\": \"basic-addon1\",\n      onChange: evt => onChange(evt.target.value),\n      value: value,\n      ...otherProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 500,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = InputSettings;\n\nfunction download(data, filename, type) {\n  var file = new Blob([data], {\n    type: type\n  });\n  if (window.navigator.msSaveOrOpenBlob) // IE10+\n    window.navigator.msSaveOrOpenBlob(file, filename);else {\n    // Others\n    var a = document.createElement(\"a\"),\n        url = URL.createObjectURL(file);\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function () {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 0);\n  }\n}\n\nconst getLocalImage = callback => evt => {\n  let tgt = evt.target;\n  let files = tgt.files; // FileReader support\n\n  if (FileReader && files && files.length) {\n    let fr = new FileReader();\n\n    fr.onload = () => callback(fr);\n\n    fr.readAsDataURL(files[0]);\n  }\n};\n\nconst getLocalSubtitle = callback => evt => {\n  let tgt = evt.target;\n  let files = tgt.files; // FileReader support\n\n  if (FileReader && files && files.length) {\n    let fr = new FileReader();\n\n    fr.onload = () => callback(fr);\n\n    fr.readAsText(files[0]);\n  }\n};\n\nexport default EditSub;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"EditSub\");\n$RefreshReg$(_c2, \"InputSettings\");","map":{"version":3,"sources":["/home/intelie/Documents/srt2/src/cmponents/EditSub.tsx"],"names":["React","useEffect","useState","Form","Button","DropdownButton","Dropdown","Row","Col","InputGroup","FormControl","parseObjectToPSRT","parsePSRTToObject","BG_SELECT_COLOR","EditSub","sub","setSub","page","defaultPage","setPage","setDefaultPage","setImage","image","setImageStyle","setEditStyles","isNewPage","setIsNewPage","index","setIndex","x","setX","y","setY","width","setWidth","size","setSize","subText","setSubText","show","setShow","style","setStyle","keyStyle","setKeyStyle","valueStyle","setValueStyle","dowloadFileName","setDowloadFileName","imageLink","setimageLink","includes","lastIndex","setLastIndex","reduce","p","c","handleChangeSub","backgroundColor","Object","keys","data","map","txt","parseInt","String","parseFloat","text","error","console","log","updateSubInfos","newSub","_sub","find","a","oldX","oldY","oldW","oldS","old","addNewText","addNewPage","updateSubtitleFile","fr","localStorage","setItem","result","showImage","handleAddStyle","handleRemoveStyle","key","newStyles","handleClearAll","page1","position","left","overflowY","overflowX","zIndex","getLocalImage","visibility","height","getLocalSubtitle","d","alignItems","e","target","value","length","styleProp","replaceAll","download","JSON","stringify","InputSettings","placeholder","onChange","className","otherProps","evt","filename","type","file","Blob","window","navigator","msSaveOrOpenBlob","document","createElement","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","callback","tgt","files","FileReader","onload","readAsDataURL","readAsText"],"mappings":"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","sourcesContent":["/* eslint-disable react/jsx-no-undef */\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Form,\n  Button,\n  DropdownButton,\n  Dropdown,\n  Row,\n  Col,\n  InputGroup,\n  FormControl,\n} from \"react-bootstrap\";\nimport {\n  parseObjectToPSRT,\n  parsePSRTFileToObject,\n  parsePSRTToObject,\n} from \"../service/subtitle\";\nimport { ImageStyle } from \"./ImageSubTittle\";\n\nconst BG_SELECT_COLOR = \"#0f04\";\n//import DragScaleBar from 'react-drag-scale-bar'\n// import { Container } from './styles';\ntype TypeUseState<T> = (a: T | ((a: T) => T)) => void;\ntype TypeSub = {\n  [page: string]: {\n    x: number;\n    y: number;\n    index: number;\n    width: number;\n    size: number;\n    text: string;\n    style: React.CSSProperties;\n  }[];\n};\nconst EditSub: React.FC<{\n  sub: TypeSub;\n  setSub: TypeUseState<TypeSub>;\n  page?: string;\n  setPage: TypeUseState<string>;\n  setImage: TypeUseState<string>;\n  image?: string;\n  setImageStyle: TypeUseState<React.CSSProperties | string>;\n  setEditStyles: TypeUseState<ImageStyle>;\n}> = ({\n  sub,\n  setSub,\n  page: defaultPage,\n  setPage: setDefaultPage,\n  setImage,\n  image,\n  setImageStyle,\n  setEditStyles,\n}) => {\n  const [page, setPage] = useState(defaultPage || \"page1\");\n  const [isNewPage, setIsNewPage] = useState(false);\n  const [index, setIndex] = useState<string | number>(1);\n  const [x, setX] = useState<string | number>(0);\n  const [y, setY] = useState<string | number>(0);\n  const [width, setWidth] = useState<string | number>(0);\n  const [size, setSize] = useState<string | number>(0);\n  const [subText, setSubText] = useState(\"\");\n  const [show, setShow] = useState(true);\n  const [style, setStyle] = useState<{ [cssAttr: string]: string }>({});\n  const [keyStyle, setKeyStyle] = useState<string>(\"\");\n  const [valueStyle, setValueStyle] = useState<string>(\"\");\n  const [dowloadFileName, setDowloadFileName] = useState(\"sub\");\n  const [imageLink, setimageLink] = useState(\n    image?.includes(\"base46\") ? \"File\" : image\n  );\n  const [lastIndex, setLastIndex] = useState(\n    sub[`${page}`]?.reduce((p, c) => (c.index > p ? c.index : p), 0) + 1\n  );\n\n  const handleChangeSub = () => {\n    setEditStyles({\n      [page]: {\n        [index]: {\n          backgroundColor: BG_SELECT_COLOR,\n        },\n      },\n    });\n    if (Object.keys(sub).includes(page)) {\n      try {\n        setSub((data) => ({\n          ...data,\n          [page]: [\n            ...data[page]?.map((txt) => {\n              if (txt.index === parseInt(String(index))) {\n                return {\n                  ...txt,\n                  x: parseFloat(x),\n                  y: parseFloat(y),\n                  width: parseFloat(width),\n                  size: parseFloat(size),\n                  text: subText,\n                  style: {\n                    ...style,\n                  },\n                };\n              } else {\n                return txt;\n              }\n            }),\n          ],\n        }));\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  useEffect(() => {\n    //console.log(sub);\n    handleChangeSub();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [x, y, width, size, subText, style, defaultPage]);\n\n  const updateSubInfos = (newSub?: TypeSub) => {\n    const _sub = newSub || sub;\n    if (page) {\n      const text = _sub[page]?.find((a) => a.index === parseInt(String(index)));\n      setX((oldX) => text?.x || oldX);\n      setY((oldY) => text?.y || oldY);\n      setWidth((oldW) => text?.width || oldW);\n      setSize((oldS) => text?.size || oldS);\n      setSubText(text?.text || \"\");\n      setStyle((old) => (text?.style ? { ...text?.style } : { ...old }));\n    }\n  };\n\n  const addNewText = () => {\n    setSub((data) => ({\n      ...data,\n      [page]: [\n        ...data[page],\n        {\n          index: parseInt(String(lastIndex)),\n          x: parseFloat(String(x)),\n          y: parseFloat(String(y)),\n          width: parseFloat(String(width)),\n          size: parseFloat(String(size)),\n          text: subText,\n          style: {\n            ...style,\n            backgroundColor: BG_SELECT_COLOR,\n          },\n        },\n      ],\n    }));\n\n    setIndex(lastIndex);\n    setLastIndex((old) => old + 1);\n  };\n\n  const addNewPage = () => {\n    if (isNewPage) {\n      setSub({\n        ...sub,\n        [page]: [\n          {\n            index: parseInt(String(0)),\n            x: parseFloat(String(x)),\n            y: parseFloat(String(y)),\n            width: parseFloat(String(width)),\n            size: parseFloat(String(size)),\n            text: subText,\n            style: {\n              ...style,\n              backgroundColor: BG_SELECT_COLOR,\n            },\n          },\n        ],\n      });\n      updateSubInfos(sub);\n\n      setIndex(0);\n      setLastIndex(1);\n      setDefaultPage(page);\n      updateSubInfos();\n    }\n  };\n\n  const updateSubtitleFile = (fr: FileReader) => {\n    localStorage.setItem(\"lastPSRT\", String(fr.result));\n    const newSub: TypeSub = parsePSRTToObject(String(fr.result));\n    setSub(newSub);\n    setLastIndex(\n      newSub[page]?.reduce((p, { index }) => (index > p ? index : p), 0) + 1\n    );\n    updateSubInfos(newSub);\n  };\n  const showImage = (fr: FileReader) => {\n    localStorage.setItem(\"lastImage\", String(fr.result));\n    setImage(String(fr.result));\n  };\n\n  const handleAddStyle = () => {\n    setStyle((old) => ({ ...old, [keyStyle]: valueStyle }));\n    setValueStyle(\"\");\n    setKeyStyle(\"\");\n  };\n\n  const handleRemoveStyle = (key: string) => {\n    setValueStyle(style[key]);\n    setKeyStyle(key);\n    const newStyles = { ...style };\n\n    delete newStyles[key];\n\n    setStyle(newStyles);\n  };\n\n  const handleClearAll = () => {\n    const newSub = {\n      page1: [],\n    };\n\n    setSub(newSub);\n    setPage(\"page1\");\n    setIndex(0);\n    setLastIndex(0);\n  };\n\n  useEffect(() => {\n    updateSubInfos();\n  }, [index, page]);\n\n  useEffect(() => {\n    setIsNewPage(!Object.keys(sub).includes(page));\n    Object.keys(sub).includes(page) && setDefaultPage(page);\n    setLastIndex(\n      sub[page]?.reduce((p, { index }) => (index > p ? index : p), 0) + 1\n    );\n  }, [page]);\n\n  return (\n    <Form\n      style={{\n        position: \"fixed\",\n        width: \"500px\",\n        left: 0,\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        zIndex: 50,\n      }}\n    >\n      <div className={`form-check form-switch mr-0`}>\n        <input\n          className=\"form-check-input\"\n          type=\"checkbox\"\n          onClick={() => setShow((a) => !a)}\n          id=\"flexSwitchCheckChecked\"\n          checked={show}\n        />\n        <label className=\"form-check-label\" htmlFor=\"flexSwitchCheckChecked\">\n          Settings\n        </label>\n      </div>\n      {show && (\n        <div>\n          <Row className=\"mb-2\">\n            <Form.Group className=\" col-4 mb-0\" controlId=\"subtitle-file\">\n              <Form.Label className=\"btn btn-primary\">Load Image</Form.Label>\n              <Form.Control\n                onChange={getLocalImage(showImage)}\n                type=\"file\"\n                style={{ visibility: \"hidden\", height: \"0px\" }}\n                placeholder=\"Image\"\n              />\n            </Form.Group>\n\n            <Form.Group className=\" col-4 mb-0\" controlId=\"image-file\">\n              <Form.Label className=\"btn btn-primary\">Load SubTitle</Form.Label>\n              <Form.Control\n                onChange={getLocalSubtitle(updateSubtitleFile)}\n                type=\"file\"\n                style={{ visibility: \"hidden\", height: \"0px\" }}\n                placeholder=\"Image\"\n              />\n            </Form.Group>\n\n            <Button\n              className=\" col-2\"\n              onClick={handleClearAll}\n              variant=\"danger\"\n            >\n              Clear All\n            </Button>\n            <InputSettings\n              className=\"mt-2 col-12\"\n              value={imageLink}\n              placeholder=\"Image Link\"\n              onChange={(d: string) => {\n                setimageLink(d?.includes(\"base64\") ? \"File\" : d);\n                setImage((data) => (d === \"File\" ? data : d));\n              }}\n            />\n          </Row>\n\n          <Row style={{ alignItems: \"flex-end\" }}>\n            <Form.Group className=\" col-3 mb-0\" controlId=\"formPage\">\n              <Form.Label>Page</Form.Label>\n              <Form.Control\n                value={page}\n                onChange={(e) => setPage(e.target.value)}\n                placeholder=\"Page\"\n              />\n            </Form.Group>\n\n            <Button\n              className=\" col-2\"\n              onClick={addNewPage}\n              disabled={!isNewPage}\n              variant=\"primary\"\n            >\n              Add page\n            </Button>\n\n            <Form.Group className=\" col-3 mb-0\" controlId=\"formIndex\">\n              <Form.Label>Index</Form.Label>\n              <Form.Control\n                value={index}\n                onChange={(e) => setIndex(e.target.value)}\n                type=\"number\"\n                min=\"0\"\n                max={sub[String(page)]?.length}\n                step=\"1\"\n                placeholder=\"index\"\n              />\n            </Form.Group>\n\n            <Button className=\" col-2\" onClick={addNewText} variant=\"primary\">\n              Add Text\n            </Button>\n          </Row>\n          <Row>\n            <Form.Group className=\" col-3\" controlId=\"formX\">\n              <Form.Label>X axis</Form.Label>\n              <Form.Control\n                value={x}\n                onChange={(e) => setX(e.target.value)}\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                step=\"0.1\"\n                placeholder=\"X\"\n              />\n            </Form.Group>\n\n            <Form.Group className=\" col-3\" controlId=\"formY\">\n              <Form.Label>Y axis</Form.Label>\n              <Form.Control\n                value={y}\n                onChange={(e) => setY(e.target.value)}\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                step=\"0.1\"\n                placeholder=\"Y\"\n              />\n            </Form.Group>\n\n            <Form.Group className=\" col-3\" controlId=\"formY\">\n              <Form.Label>Size</Form.Label>\n              <Form.Control\n                value={size}\n                onChange={(e) => setSize(e.target.value)}\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                step=\"0.1\"\n                placeholder=\"size\"\n              />\n            </Form.Group>\n            <Form.Group className=\" col-3\" controlId=\"formWidth\">\n              <Form.Label>Width</Form.Label>\n              <Form.Control\n                value={width}\n                onChange={(e) => setWidth(e.target.value)}\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                step=\"0.1\"\n                placeholder=\"width\"\n              />\n            </Form.Group>\n          </Row>\n          <Row>\n            <Form.Group className=\" col-8\" controlId=\"formText\">\n              <Form.Label>Text</Form.Label>\n              <Form.Control\n                value={subText}\n                onChange={(e) => setSubText(e.target.value)}\n                type=\"text\"\n                placeholder=\"width\"\n              />\n            </Form.Group>\n            {Object.keys(style).length > 0 && (\n              <DropdownButton\n                className=\"col-4\"\n                variant=\"secondary\"\n                id=\"dropdown-basic-button\"\n                title=\"Styles\"\n              >\n                {Object.keys(style).length > 0 &&\n                  Object.keys(style)?.map((styleProp) => (\n                    <Dropdown.Item\n                      onClick={() => handleRemoveStyle(styleProp)}\n                      key={styleProp}\n                    >\n                      {`${styleProp.replaceAll(\"_\", \" \")} : ${\n                        style[styleProp]\n                      }`}\n                    </Dropdown.Item>\n                  ))}\n              </DropdownButton>\n            )}\n          </Row>\n          <Row>\n            <Form.Group className=\" col-4\" controlId=\"formKeyStyle\">\n              <Form.Control\n                value={keyStyle}\n                onChange={(e) => setKeyStyle(e.target.value)}\n                type=\"text\"\n                placeholder=\"key\"\n              />\n            </Form.Group>\n            <Form.Group className=\" col-4\" controlId=\"formValueStyle\">\n              <Form.Control\n                value={valueStyle}\n                onChange={(e) => setValueStyle(e.target.value)}\n                type=\"text\"\n                placeholder=\"value\"\n              />\n            </Form.Group>\n\n            <Button\n              style={{ height: \"100%\" }}\n              className=\"p-2 col-4 btn-secondary\"\n              onClick={handleAddStyle}\n            >\n              Add Style\n            </Button>\n          </Row>\n\n          <Row>\n            <Form.Group className=\" col-6\" controlId=\"formDownload\">\n              <Form.Label>Download Subtitle</Form.Label>\n              <Form.Control\n                value={dowloadFileName}\n                onChange={(e) => setDowloadFileName(e.target.value)}\n                placeholder=\"Download Subtitle\"\n              />\n            </Form.Group>\n            <Col className=\" col-6\">\n              <Button\n                className=\" col-12 mb-2\"\n                disabled={!dowloadFileName}\n                onClick={() =>\n                  download(\n                    parseObjectToPSRT(sub),\n                    `${dowloadFileName}.psrt`,\n                    \"*.psrt\"\n                  )\n                }\n                variant=\"primary\"\n              >\n                (.psrt)\n              </Button>\n              <Button\n                className=\" col-12\"\n                disabled={!dowloadFileName}\n                onClick={() =>\n                  download(\n                    JSON.stringify(sub),\n                    `${dowloadFileName}.json`,\n                    \"*.json\"\n                  )\n                }\n                variant=\"primary\"\n              >\n                (.json)\n              </Button>\n            </Col>\n          </Row>\n        </div>\n      )}\n    </Form>\n  );\n};\n\nconst InputSettings = ({\n  placeholder,\n  value,\n  onChange,\n  className = \"\",\n  ...otherProps\n}) => {\n  return (\n    <InputGroup className={\"mb-3 \" + className}>\n      <FormControl\n        placeholder={placeholder}\n        aria-label={placeholder}\n        aria-describedby=\"basic-addon1\"\n        onChange={(evt) => onChange(evt.target.value)}\n        value={value}\n        {...otherProps}\n      />\n    </InputGroup>\n  );\n};\n\nfunction download(data, filename, type) {\n  var file = new Blob([data], { type: type });\n  if (window.navigator.msSaveOrOpenBlob)\n    // IE10+\n    window.navigator.msSaveOrOpenBlob(file, filename);\n  else {\n    // Others\n    var a = document.createElement(\"a\"),\n      url = URL.createObjectURL(file);\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function () {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 0);\n  }\n}\n\nconst getLocalImage = (callback: (fr: FileReader) => any) => (evt) => {\n  let tgt = evt.target;\n  let files = tgt.files;\n\n  // FileReader support\n  if (FileReader && files && files.length) {\n    let fr = new FileReader();\n    fr.onload = () => callback(fr);\n    fr.readAsDataURL(files[0]);\n  }\n};\n\nconst getLocalSubtitle = (callback: (fr: FileReader) => any) => (evt) => {\n  let tgt = evt.target;\n  let files = tgt.files;\n\n  // FileReader support\n  if (FileReader && files && files.length) {\n    let fr = new FileReader();\n    fr.onload = () => callback(fr);\n    fr.readAsText(files[0]);\n  }\n};\n\nexport default EditSub;\n"]},"metadata":{},"sourceType":"module"}