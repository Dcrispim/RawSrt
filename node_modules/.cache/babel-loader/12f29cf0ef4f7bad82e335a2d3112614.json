{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/intelie/Documents/srt2/src/cmponents/ImageSubTittle.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\n\nconst ImageSubTittle = ({\n  imgPath,\n  subtitle,\n  page,\n  editStyles,\n  ...props\n}) => {\n  _s();\n\n  var _subtitle$page;\n\n  const imgRef = useRef(null);\n  const [subY, setSubY] = useState(0);\n  const [subX, setSubX] = useState(0);\n  const [subH, setSubH] = useState(0);\n  const [subW, setSubW] = useState(0);\n\n  const updateSubs = () => {\n    var _imgRef$current, _imgRef$current2, _imgRef$current3, _imgRef$current4;\n\n    setSubY((_imgRef$current = imgRef.current) === null || _imgRef$current === void 0 ? void 0 : _imgRef$current.offsetTop);\n    setSubX((_imgRef$current2 = imgRef.current) === null || _imgRef$current2 === void 0 ? void 0 : _imgRef$current2.offsetLeft);\n    setSubH((_imgRef$current3 = imgRef.current) === null || _imgRef$current3 === void 0 ? void 0 : _imgRef$current3.offsetHeight);\n    setSubW((_imgRef$current4 = imgRef.current) === null || _imgRef$current4 === void 0 ? void 0 : _imgRef$current4.offsetWidth);\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateSubs);\n    return () => {\n      window.removeEventListener(\"resize\", updateSubs);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        zIndex: 11,\n        top: subY,\n        left: subX,\n        width: subW,\n        height: subH\n      },\n      children: (_subtitle$page = subtitle[page]) === null || _subtitle$page === void 0 ? void 0 : _subtitle$page.sort((a, b) => a.index - b.index).map(({\n        text,\n        x,\n        y,\n        width,\n        size,\n        style,\n        index\n      }) => {\n        var _editStyles$page;\n\n        return /*#__PURE__*/_jsxDEV(SubTitle, {\n          id: index,\n          text: text,\n          globalStyle: subtitle.__global_style__,\n          editStyles: editStyles === null || editStyles === void 0 ? void 0 : (_editStyles$page = editStyles[page]) === null || _editStyles$page === void 0 ? void 0 : _editStyles$page[index],\n          x: x,\n          y: y,\n          width: width,\n          size: size * subW / 100,\n          style: style\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      onLoad: updateSubs,\n      ref: imgRef,\n      src: imgPath,\n      alt: page,\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ImageSubTittle, \"qJzyl+6KdU+teshjiBy+Z1cuKP0=\");\n\n_c = ImageSubTittle;\n\nconst SubTitle = ({\n  text,\n  x,\n  y,\n  width,\n  size,\n  style,\n  id,\n  globalStyle,\n  editStyles\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"p\", {\n    id: `${id}`,\n    style: {\n      position: \"absolute\",\n      top: `${y}%`,\n      left: `${x}%`,\n      width: `${width}%`,\n      fontSize: `${size}px`,\n      ...style,\n      ...globalStyle,\n      ...editStyles\n    },\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = SubTitle;\nexport default ImageSubTittle;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ImageSubTittle\");\n$RefreshReg$(_c2, \"SubTitle\");","map":{"version":3,"sources":["/home/intelie/Documents/srt2/src/cmponents/ImageSubTittle.tsx"],"names":["React","useEffect","useRef","useState","ImageSubTittle","imgPath","subtitle","page","editStyles","props","imgRef","subY","setSubY","subX","setSubX","subH","setSubH","subW","setSubW","updateSubs","current","offsetTop","offsetLeft","offsetHeight","offsetWidth","window","addEventListener","removeEventListener","position","zIndex","top","left","width","height","sort","a","b","index","map","text","x","y","size","style","__global_style__","SubTitle","id","globalStyle","fontSize"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { parsePSRTFileToObject } from \"../service/subtitle\";\n\n// import { Container } from './styles';\n\nexport type ImageStyle = {\n  [page: string]: {\n    [id: number]: React.CSSProperties;\n  };\n};\n\nconst ImageSubTittle: React.FC<{\n  imgPath: string;\n  subtitle: {\n    __global_style__?: React.CSSProperties;\n    [page: string]: {\n      x: number;\n      y: number;\n      width: number;\n      size: number;\n      text: string;\n      index: number;\n      style: React.CSSProperties;\n    }[];\n  };\n  page: string;\n  editStyles?:ImageStyle;\n  style?: React.CSSProperties;\n  [prop: string]: any;\n}> = ({ imgPath, subtitle, page, editStyles, ...props }) => {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const [subY, setSubY] = useState<any>(0);\n  const [subX, setSubX] = useState<any>(0);\n  const [subH, setSubH] = useState<any>(0);\n  const [subW, setSubW] = useState<any>(0);\n  const updateSubs = () => {\n    setSubY(imgRef.current?.offsetTop);\n    setSubX(imgRef.current?.offsetLeft);\n    setSubH(imgRef.current?.offsetHeight);\n    setSubW(imgRef.current?.offsetWidth);\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateSubs);\n    return () => {\n      window.removeEventListener(\"resize\", updateSubs);\n    };\n  }, []);\n\n  return (\n    <div>\n      <div\n        style={{\n          position: \"absolute\",\n          zIndex: 11,\n          top: subY,\n          left: subX,\n          width: subW,\n          height: subH,\n        }}\n      >\n        {subtitle[page]\n          ?.sort((a, b) => a.index - b.index)\n          .map(({ text, x, y, width, size, style, index }) => (\n            <SubTitle\n              key={index}\n              id={index}\n              text={text}\n              globalStyle={subtitle.__global_style__}\n              editStyles={editStyles?.[page]?.[index]}\n              x={x}\n              y={y}\n              width={width}\n              size={(size * subW) / 100}\n              style={style}\n            />\n          ))}\n      </div>\n      <img\n        onLoad={updateSubs}\n        ref={imgRef}\n        src={imgPath}\n        alt={page}\n        {...props}\n      />\n    </div>\n  );\n};\n\nconst SubTitle = ({\n  text,\n  x,\n  y,\n  width,\n  size,\n  style,\n  id,\n  globalStyle,\n  editStyles,\n}: {\n  text: string;\n  x: number;\n  y: number;\n  width?: number;\n  globalStyle?: React.CSSProperties;\n  editStyles?:React.CSSProperties\n  [k: string]: any;\n}) => {\n  return (\n    <p\n      id={`${id}`}\n      style={{\n        position: \"absolute\",\n        top: `${y}%`,\n        left: `${x}%`,\n        width: `${width}%`,\n        fontSize: `${size}px`,\n        ...style,\n        ...globalStyle,\n        ...editStyles\n      }}\n    >\n      {text}\n    </p>\n  );\n};\n\nexport default ImageSubTittle;\n"]},"metadata":{},"sourceType":"module"}